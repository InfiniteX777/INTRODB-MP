<html>
<link rel="stylesheet" href="assets/css/variables.css">
<link rel="stylesheet" href="assets/css/main.css">
<link rel="stylesheet" href="assets/css/menu.css">
<link rel="stylesheet" href="assets/css/search-view.css">
<link rel="stylesheet" href="assets/css/admin-view.css">

<div id="view-body" name="search-view">
	<ul>
		<label>
				One-Way
				<input type=radio id="tab-1" name="flight-type" value=0 onclick="flightTypeClick(this)">
			</label>
		<label>
				Round-Trip
				<input type=radio id="tab-1" name="flight-type" value=1 onclick="flightTypeClick(this)">
			</label>
		<label>
				Multi-City
				<input type=radio id="tab-1" name="flight-type" value=2 onclick="flightTypeClick(this)">
			</label>
	</ul>
	<div name="loc-cont">
		<input list="loc-from" name="loc-from" placeholder="From">
		<datalist id="loc-from">
				<option value="Manila">

			</datalist>
		<input list="loc-to" name="loc-to" placeholder="To">
		<datalist id="loc-to">
				<option value="Manila">

			</datalist>
	</div>
	<div name="date-cont">
		<input type=date name="date-depart">
		<input type=date name="date-return">
	</div>
	<div name="count-cont">
		<input type=number name="adult" min=0 value=1 oninput="countInput(this)">
		<label>Adult</label>
		<br>
		<input type=number name="children" min=0 value=0 oninput="countInput(this)">
		<label>Children (2-11 years)</label>
		<br>
		<input type=number name="infant" min=0 value=0 oninput="countInput(this)">
		<label>Infant (below 2 years)</label>
	</div>
	<input type="submit" value="Search">
</div>

<div hidden id="view-body" name="about-view">
	<a style="color: var(--blue);">
		<h2>Hey there!</h2>
		<h3 style="padding: 24px;">
			This is a nice app.
		</h3>
	</a>
</div>

<div hidden id="view-body" name="admin-view">
	<textarea></textarea>
	<input type=text>
	<input type=submit>
</div>

<div id="table-of-contents">
	<h2 onclick="adminPrompt(this)">INTRODB</h2>
	<h3>Machine Project</h3>
	<menu id="tab-1" tab-color=var(--red) view="search-view" onclick="menuClick(this)">Search Flight</menu>
	<menu id="tab-2" tab-color=var(--green) view="" onclick="menuClick(this)">Login</menu>
	<menu id="tab-3" tab-color=var(--blue) view="about-view" onclick="menuClick(this)">About</menu>
	<menu hidden id="tab-4" tab-color=var(--teal) view="admin-view" onclick="menuClick(this)">Admin</menu>
</div>


<script>
	//search-view.js
	var flight_type;

	function countInput(self) {
		if (self.name === "adult") {
			var children = document.getElementsByName("children")[0];
			var infant = document.getElementsByName("infant")[0];
			var v = parseInt(children.value);

			if (parseInt(self.value) === 0 && v > 2) {
				children.value = 2;
			} else if (self.value >= 20 - v) {
				self.value = 20 - v;
			}

			v = parseInt(infant.value);

			if (v > self.value) {
				infant.value = self.value;
			}
		} else {
			var v = parseInt(
				document.getElementsByName("adult")[0].value
			);

			if (self.name === "children") {
				if (v === 0 && parseInt(self.value) > 2) {
					self.value = 2;
				} else if (self.value >= 20 - v) {
					self.value = 20 - v;
				}
			} else {
				if (self.value > v) {
					self.value = v;
				}
			}
		}
	}

	function flightTypeClick(self) {
		if (flight_type) {
			flight_type.parentElement.removeAttribute("style");
		}

		if (self.value == 0) {
			var v = document.getElementsByName("date-return")[0];

			v.setAttribute("disabled", "1");
			v.setAttribute(
				"style",
				"cursor: not-allowed; color: var(--red); background-color: var(--red);"
			);
		} else {
			var v = document.getElementsByName("date-return")[0];

			v.removeAttribute("disabled");
			v.removeAttribute("style");
		}

		self.setAttribute("checked", "checked");

		self.parentElement.setAttribute(
			"style",
			"box-shadow: 0 0 10px #000; color: #fff; background-color: var(--red);"
		);

		flight_type = self;
	}

	flightTypeClick(document.getElementsByName("flight-type")[0]);

	// admin-view.js
	function adminPrompt(self) {
		var v = prompt();

		if (v === "1234") {
			document.getElementById("tab-4").removeAttribute("hidden");
			self.removeAttribute("onclick");
			self.innerHTML = "ADMIN";
		}
	}

	//main.js
	var selected_menu;

	function menuClick(self) {
		if (selected_menu != self) {
			var view // View for the specified menu.

			// Clear previous menu.
			if (selected_menu) {
				selected_menu.removeAttribute("style");

				view = document.getElementsByName(selected_menu.getAttribute("view"))[0];

				if (view) {
					view.setAttribute("hidden", "hidden");
				}
			}

			var color = self.getAttribute("tab-color");
			selected_menu = self;

			document
				.getElementById("table-of-contents")
				.getElementsByTagName("h3")[0].style.color = color;

			self.setAttribute(
				"style",
				"text-indent: 20px; color: #fff; background-color: " +
				color +
				";"
			);

			// Change View
			view = document.getElementsByName(self.getAttribute("view"))[0];

			if (view) {
				view.removeAttribute("hidden");
			}
		}
	}

	menuClick(document.getElementsByTagName("menu")[0]);
</script>
</html>